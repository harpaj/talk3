<template>
  <require from="./graph"></require>
  <div class="details-card">
    <div class="pure-g">
        <div class="details-name pure-u-7-8">
          <p class="treatment-name">${treatment.treatment}</p>
          <p class="treatment-names">${treatment.names.join(', ')}</p>
        </div>
        <div class="details-exit pure-u-1-8">
          <a class="details-exit-link" route-href="route: overview">ğŸ—™</a>
        </div>
    </div>
    <div class="hr"></div>
    <div class="pure-g">
      <div class="details-box graph pure-u-3-4">
        <router-view></router-view>
      </div>
      <div class="details-boxes pure-u-1-4">
        <a class="details-box info ${active_graph === 'count' ? 'active' : ''}" href="javascript:void(0)" click.delegate="graph('count')">
          <p class="box-header">Activity (absolute)</p>
          <p class="box-content">
            ${treatment.total_cnt}
            <span class="${trend(treatment.previous_year_cnt, treatment.last_year_cnt, 'sentiment')}">
              ${trend(treatment.previous_year_cnt, treatment.last_year_cnt, 'arrow')}
            </span>
          </p>
          <p class="box-footer">
            mentions overall<br>
            <strong class="${trend(treatment.previous_year_cnt, treatment.last_year_cnt, 'sentiment')}">
              ${trend(treatment.previous_year_cnt, treatment.last_year_cnt, 'description')}
            </strong> last year
          </p>
        </a>
        <a class="details-box info ${active_graph === 'relative' ? 'active' : ''}" href="javascript:void(0)" click.delegate="graph('relative')">
          <p class="box-header">Activity (relative)</p>
          <p class="box-content">
            ${decimals(treatment.total_pcnt)}%
            <span class="${trend(treatment.previous_year_pcnt, treatment.last_year_pcnt, 'sentiment')}">
              ${trend(treatment.previous_year_pcnt, treatment.last_year_pcnt, 'arrow')}
            </span>
          </p>
          <p class="box-footer">
            of mentions overall<br>
            <strong class="${trend(treatment.previous_year_pcnt, treatment.last_year_pcnt, 'sentiment')}">
              ${trend(treatment.previous_year_pcnt, treatment.last_year_pcnt, 'description')}
            </strong> last year
          </p>
        </a>
        <a class="details-box info ${active_graph === 'score' ? 'active' : ''}" href="javascript:void(0)" click.delegate="graph('score')">
          <p class="box-header">Score</p>
          <p class="box-content ${(treatment.total_score > 0.05) ? 'pos' : (treatment.total_score < -0.05) ? 'neg' : 'neu'}">
            ${treatment.total_score.toFixed(2)}
            <span class="${trend(treatment.previous_year_score, treatment.last_year_score, 'sentiment')}">
              ${trend(treatment.previous_year_score, treatment.last_year_score, 'arrow')}
            </span>
          </p>
          <p class="box-footer">
            sentiment score overall<br>
            <strong class="${trend(treatment.previous_year_score, treatment.last_year_score, 'sentiment')}">
              ${trend(treatment.previous_year_score, treatment.last_year_score, 'description')}
            </strong> last year
          </p>
        </a>
      </div>
    </div>
    <!--
    <div class="hr"></div>
    <div class="pure-g">
    </div>
    -->
  </div>
</template>
